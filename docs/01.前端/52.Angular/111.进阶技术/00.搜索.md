---
title: 搜索
date: 2021-05-08 16:09:14
permalink: /pages/f216d2/
categories:
  - 前端
  - Angular
  - 111进阶技术
tags:
  - 
---


## fuse.js

### 安装

```
npm install --save fuse.js
```

### 使用

```js
import Fuse from 'fuse.js'
```

先在组件的ts中编写点内容

```typescript
options = {    // 设置搜索的范围
    keys: [
      'title',
      'author.firstName'
    ]
  };
  list = [      
    {
      'title': 'Old Man\'s War',
      'author': {
        'firstName': 'John',
        'lastName': 'Scalzi'
      }
    },
    {
      'title': 'The Lock Artist',
      'author': {
        'firstName': 'Steve',
        'lastName': 'Hamilton'
      }
    },
    {
      'title': 'HTML5',
      'author': {
        'firstName': 'Remy',
        'lastName': 'Sharp'
      }
    },
    {
      'title': 'Right Ho Jeeves',
      'author': {
        'firstName': 'P.D',
        'lastName': 'Woodhouse'
      }
    },
    {
      'title': 'The Code of the Wooster',
      'author': {
        'firstName': 'P.D',
        'lastName': 'Woodhouse'
      }
    },
    {
      'title': 'Thank You Jeeves',
      'author': {
        'firstName': 'P.D',
        'lastName': 'Woodhouse'
      }
    },
    {
      'title': 'The DaVinci Code',
      'author': {
        'firstName': 'Dan',
        'lastName': 'Brown'
      }
    },
    {
      'title': 'Angels & Demons',
      'author': {
        'firstName': 'Dan',
        'lastName': 'Brown'
      }
    },
    {
      'title': 'The Silmarillion',
      'author': {
        'firstName': 'J.R.R',
        'lastName': 'Tolkien'
      }
    },
    {
      'title': 'Syrup',
      'author': {
        'firstName': 'Max',
        'lastName': 'Barry'
      }
    },
    {
      'title': 'The Lost Symbol',
      'author': {
        'firstName': 'Dan',
        'lastName': 'Brown'
      }
    },
    {
      'title': 'The Book of Lies',
      'author': {
        'firstName': 'Brad',
        'lastName': 'Meltzer'
      }
    },
    {
      'title': 'Lamb',
      'author': {
        'firstName': 'Christopher',
        'lastName': 'Moore'
      }
    },
    {
      'title': 'Fool',
      'author': {
        'firstName': 'Christopher',
        'lastName': 'Moore'
      }
    },
    {
      'title': 'Incompetence',
      'author': {
        'firstName': 'Rob',
        'lastName': 'Grant'
      }
    },
    {
      'title': 'Fat',
      'author': {
        'firstName': 'Rob',
        'lastName': 'Grant'
      }
    },
    {
      'title': 'Colony',
      'author': {
        'firstName': 'Rob',
        'lastName': 'Grant'
      }
    },
    {
      'title': 'Backwards, Red Dwarf',
      'author': {
        'firstName': 'Rob',
        'lastName': 'Grant'
      }
    },
    {
      'title': 'The Grand Design',
      'author': {
        'firstName': 'Stephen',
        'lastName': 'Hawking'
      }
    },
    {
      'title': 'The Book of Samson',
      'author': {
        'firstName': 'David',
        'lastName': 'Maine'
      }
    },
    {
      'title': 'The Preservationist',
      'author': {
        'firstName': 'David',
        'lastName': 'Maine'
      }
    },
    {
      'title': 'Fallen',
      'author': {
        'firstName': 'David',
        'lastName': 'Maine'
      }
    },
    {
      'title': 'Monster 1959',
      'author': {
        'firstName': 'David',
        'lastName': 'Maine'
      }
    }
  ]; // 这个是内容，可以从网络获取
  fuse = new Fuse(this.list, this.options); // 实例化一个Fuse
  pattern: any = '';

  result: any;

  run() {
    this.result = this.fuse.search(this.pattern); // fuse的search方法，把搜索到的返回给result
  }
```

html中编写

```html
<input type="text" [(ngModel)]="pattern" (keyup)="run()">
<p>{{pattern}}</p>


<div>{{result|json}}</div>

```

效果

![image-20210426091001055](https://gitee.com/lukexiaoasusual/images/raw/master/img/image-20210426091001055.png)

我们可以看到输入1，就能返回，options当时定义的搜索范围，title 里包含1的数据，得到返回的数据，我们下面就可以做我们想做的操作

```typescript
options = {    // 设置搜索的范围
    keys: [
      'title',
      'author.firstName'
    ]
  };
```

### fuse的api

参考官网：[api](https://fusejs.io/api/options.html)